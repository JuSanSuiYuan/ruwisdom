<!-- OA管理仪表盘页面 -->
<view class="oa-dashboard-container">
  <!-- 顶部导航栏 -->
  <view class="top-nav">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatar || '/images/default-avatar.png'}}"></image>
      <view class="user-details">
        <text class="user-name">{{userInfo.name || '管理员'}}</text>
        <text class="user-role">{{userRoleText}}</text>
      </view>
    </view>
    <view class="top-actions">
      <view class="settings-icon" bindtap="navigateToSettings">
        <image src="/images/settings.png"></image>
      </view>
      <view class="logout-icon" bindtap="onLogout">
        <image src="/images/logout.png"></image>
      </view>
    </view>
  </view>

  <!-- 数据概览卡片 -->
  <view class="stats-section">
    <view class="section-title">
      <text>系统概览</text>
    </view>
    <view class="stats-cards">
      <stat-card number="{{statsData.studentsCount}}" label="学生总数" iconText="📚" iconBgColor="#e6f7ff"></stat-card>
      <stat-card number="{{statsData.teachersCount}}" label="教师总数" iconText="👨‍🏫" iconBgColor="#f6ffed"></stat-card>
      <stat-card number="{{statsData.parentsCount}}" label="家长总数" iconText="👨‍👩‍👧‍👦" iconBgColor="#fff7e6"></stat-card>
      <stat-card number="{{statsData.adminCount}}" label="管理员数" iconText="👨‍💼" iconBgColor="#f9f0ff"></stat-card>
      <stat-card number="{{statsData.pendingLeaveRequests}}" label="待处理请假" iconText="📋" iconBgColor="#fff2e8"></stat-card>
    </view>
  </view>

  <!-- 快捷功能区 -->
  <view class="quick-functions">
    <view class="section-title">
      <text>管理功能</text>
    </view>
    <view class="functions-grid">
      <view class="function-item" bindtap="navigateToUserManagement">
        <view class="function-icon user-icon">
          <image src="/images/users.png"></image>
        </view>
        <text class="function-name">用户管理</text>
      </view>
      <view class="function-item" bindtap="navigateToSystemSettings">
        <view class="function-icon settings-icon">
          <image src="/images/system.png"></image>
        </view>
        <text class="function-name">系统设置</text>
      </view>
      <view class="function-item" bindtap="navigateToAnnouncementManagement">
        <view class="function-icon announcement-icon">
          <image src="/images/announcement.png"></image>
        </view>
        <text class="function-name">公告管理</text>
      </view>
      <view class="function-item" bindtap="navigateToLeaveManagement">
        <view class="function-icon leave-icon">
          <image src="/images/leave.png"></image>
        </view>
        <text class="function-name">请假管理</text>
      </view>
      <view class="function-item" bindtap="navigateToElectionManagement">
        <view class="function-icon election-icon">
          <text style="font-size: 48rpx;">🗳️</text>
        </view>
        <text class="function-name">竞选管理</text>
      </view>
    </view>
  </view>

  <!-- 最近操作记录 -->
  <view class="activities-section">
    <view class="section-title">
      <text>最近操作</text>
    </view>
    <view class="activities-list">
      <view wx:if="recentActivities.length > 0">
        <activity-item wx:for="{{recentActivities}}" wx:key="id" id="{{item.id}}" title="{{item.title}}" time="{{item.time}}" type="{{item.type}}" bind:click="onActivityClick"></activity-item>
      </view>
      <view wx:else class="no-activities">暂无操作记录</view>
    </view>
  </view>
</view>