<!-- é€šçŸ¥è¯¦æƒ…é¡µé¢ -->
<view class="notification-detail-container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="nav-bar">
    <view class="nav-back" bindtap="onBackPress">
      <text>â—€</text>
    </view>
    <view class="nav-title">é€šçŸ¥è¯¦æƒ…</view>
    <view class="nav-right"></view>
  </view>

  <!-- é€šçŸ¥è¯¦æƒ…å†…å®¹ -->
  <scroll-view scroll-y class="detail-content" wx:if="{{!isLoading && notificationDetail}}">
    <!-- é€šçŸ¥å¤´éƒ¨ -->
    <view class="detail-header">
      <text class="detail-title">{{notificationDetail.title}}</text>
      <view class="detail-meta">
        <text class="detail-type">{{notificationDetail.typeName}}</text>
        <text class="detail-time">{{notificationDetail.time}}</text>
      </view>
    </view>

    <!-- é€šçŸ¥å†…å®¹ -->
    <view class="detail-body">
      <text class="detail-content-text">{{notificationDetail.content}}</text>
    </view>

    <!-- è¯¾ç¨‹ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰ -->
    <view class="course-info-section" wx:if="{{notificationDetail.courseInfo}}">
      <view class="section-title">è¯¾ç¨‹è¯¦æƒ…</view>
      <view class="course-info-grid">
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.originalCourse}}">
          <text class="info-label">åŸè¯¾ç¨‹ï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.originalCourse}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.originalTime}}">
          <text class="info-label">åŸæ—¶é—´ï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.originalTime}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.newCourse}}">
          <text class="info-label">æ–°è¯¾ç¨‹ï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.newCourse}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.newTime}}">
          <text class="info-label">æ–°æ—¶é—´ï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.newTime}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.teacher}}">
          <text class="info-label">æ•™å¸ˆï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.teacher}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.affectedDays}}">
          <text class="info-label">å½±å“æ—¥æœŸï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.affectedDays}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.originalTeacher}}">
          <text class="info-label">åŸæ•™å¸ˆï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.originalTeacher}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.substituteTeacher}}">
          <text class="info-label">ä»£è¯¾æ•™å¸ˆï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.substituteTeacher}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.courseName}}">
          <text class="info-label">è¯¾ç¨‹åç§°ï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.courseName}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.courseInfo.reason}}">
          <text class="info-label">å˜åŠ¨åŸå› ï¼š</text>
          <text class="info-value">{{notificationDetail.courseInfo.reason}}</text>
        </view>
      </view>
    </view>

    <!-- ä½œä¸šä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰ -->
    <view class="homework-info-section" wx:if="{{notificationDetail.homeworkInfo}}">
      <view class="section-title">ä½œä¸šè¯¦æƒ…</view>
      <view class="course-info-grid">
        <view class="info-item" wx:if="{{notificationDetail.homeworkInfo.subject}}">
          <text class="info-label">ç§‘ç›®ï¼š</text>
          <text class="info-value">{{notificationDetail.homeworkInfo.subject}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.homeworkInfo.deadline}}">
          <text class="info-label">æˆªæ­¢æ—¶é—´ï¼š</text>
          <text class="info-value">{{notificationDetail.homeworkInfo.deadline}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.homeworkInfo.submitMethod}}">
          <text class="info-label">æäº¤æ–¹å¼ï¼š</text>
          <text class="info-value">{{notificationDetail.homeworkInfo.submitMethod}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.homeworkInfo.score}}">
          <text class="info-label">å¾—åˆ†ï¼š</text>
          <text class="info-value">{{notificationDetail.homeworkInfo.score}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.homeworkInfo.comment}}">
          <text class="info-label">è¯„è¯­ï¼š</text>
          <text class="info-value">{{notificationDetail.homeworkInfo.comment}}</text>
        </view>
        <view class="info-item" wx:if="{{notificationDetail.homeworkInfo.teacherName}}">
          <text class="info-label">æ•™å¸ˆï¼š</text>
          <text class="info-value">{{notificationDetail.homeworkInfo.teacherName}}</text>
        </view>
      </view>
    </view>

    <!-- é™„ä»¶åˆ—è¡¨ï¼ˆå¦‚æœæœ‰ï¼‰ -->
    <view class="attachment-section" wx:if="{{notificationDetail.attachments && notificationDetail.attachments.length > 0}}">
      <view class="section-title">é™„ä»¶</view>
      <view class="attachment-list">
        <view class="attachment-item" wx:for="{{notificationDetail.attachments}}" wx:key="index" data-url="{{item.url}}" bindtap="openAttachment">
          <view class="attachment-icon">ğŸ“</view>
          <text class="attachment-name">{{item.name}}</text>
          <view class="attachment-arrow">â†’</view>
        </view>
      </view>
    </view>

    <!-- ç›¸å…³æ“ä½œæŒ‰é’® -->
    <view class="action-buttons" wx:if="{{notificationDetail.relatedCourseUrl}}">
      <button class="action-btn" type="primary" bindtap="viewRelatedCourse">æŸ¥çœ‹ç›¸å…³è¯¾ç¨‹è¡¨</button>
    </view>

    <!-- åº•éƒ¨é—´è· -->
    <view class="bottom-spacing"></view>
  </scroll-view>

  <!-- åŠ è½½ä¸­çŠ¶æ€ -->
  <view class="loading-state" wx:elif="{{isLoading}}">
    <view class="loading-spinner"></view>
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view class="error-state" wx:else>
    <image src="/images/error.png" mode="aspectFit"></image>
    <text>é€šçŸ¥ä¸å­˜åœ¨æˆ–å·²åˆ é™¤</text>
    <button class="back-btn" bindtap="onBackPress">è¿”å›</button>
  </view>
</view>